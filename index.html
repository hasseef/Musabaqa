<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#0f172a" />
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© â€“ Ù†Ø³Ø®Ø© Ù…Ù„Ø§Ø¦Ù…Ø© Ù„Ù„Ø¬ÙˆØ§Ù„</title>
    <style>
      :root{
        --bg: #0b1020;
        --card: #0f172a;
        --muted: #94a3b8;
        --text: #e5e7eb;
        --accent: #6d93ff;
        --accent-2: #22d3ee;
        --ring: #4f46e5;
        --ok: #22c55e;
        --warn: #f59e0b;
        --radius: 14px;
        --shadow: 0 6px 24px rgba(0,0,0,.25);
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Noto Sans Arabic', 'Noto Naskh Arabic', 'Segoe UI Emoji', 'Apple Color Emoji', 'Segoe UI Symbol', sans-serif; background:
        radial-gradient(1200px 500px at 70% -80%, rgba(109,147,255,.25), transparent 60%),
        radial-gradient(800px 400px at 0% 0%, rgba(34,211,238,.18), transparent 60%),
        linear-gradient(to bottom, #0b1020, #0b1020 20%, #0d1224 60%, #0b1020);
        color:var(--text);
      }
      .container{max-width:1100px; margin:0 auto; padding: 16px;}

      /* Header */
      .nav{position:sticky; top:0; z-index:30; background:rgba(11,16,32,.8); backdrop-filter: blur(12px); border-bottom:1px solid rgba(255,255,255,.08)}
      .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:12px 10px; max-width:1150px; margin:0 auto;}
      .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px;}
      .brand-badge{width:28px; height:28px; border-radius:10px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow: var(--shadow);}
      .logos{display:flex; align-items:center; gap:10px}
      .logo{display:inline-flex; align-items:center; justify-content:center; width:84px; height:28px; border-radius:999px; background:#0b1224; border:1px solid rgba(255,255,255,.08); padding:2px 8px; opacity:.9}
      .logo svg{height:18px}
      .nav-buttons{display:flex; gap:6px; align-items:center}
      .tab{padding:8px 10px; border-radius:10px; font-size:14px; color:#cbd5e1; border:none; background:transparent; cursor:pointer}
      .tab-active{background:#111c36; color:#fff; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06)}
      .cta{padding:9px 12px; border-radius:12px; background:linear-gradient(135deg,#4f46e5,#22d3ee); color:#0b1020; font-weight:700; border:none; cursor:pointer}

      /* Cards / Controls */
      .grid{display:grid; gap:12px;}
      .grid-2{grid-template-columns: 1fr 1fr;}
      .grid-3{grid-template-columns: repeat(3, 1fr);}
      .grid-4{grid-template-columns: repeat(4, 1fr);}
      @media (max-width:980px){ .grid-2,.grid-3,.grid-4{grid-template-columns: 1fr;} }
      .card{background: linear-gradient(180deg,#101a34,#0f172a); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); padding:14px; box-shadow: var(--shadow);}
      .pill{display:inline-block; padding:4px 8px; border-radius:999px; background:rgba(109,147,255,.12); color:#b9ccff; border:1px solid rgba(109,147,255,.28); font-size:12px; white-space:nowrap}
      .muted{color:var(--muted); font-size:14px}
      .input,.textarea,select{width:100%; padding:10px 12px; border:1px solid rgba(255,255,255,.12); border-radius:12px; background:#0b1224; color:var(--text); font-size:15px; outline:none}
      .input:focus,.textarea:focus,select:focus{box-shadow: 0 0 0 3px rgba(79,70,229,.35)}
      .textarea{height:100px; resize:vertical}
      .btn{padding:10px 14px; border-radius:12px; background:#1d2a5b; color:#dbeafe; font-size:14px; border:1px solid rgba(255,255,255,.14); cursor:pointer}
      .btn:hover{background:#233064}
      .btn-accent{padding:10px 14px; border-radius:12px; background:#4f46e5; color:white; font-weight:700; border:1px solid rgba(255,255,255,.14); cursor:pointer}
      .btn-ghost{padding:10px 12px; border-radius:12px; color:#bcd0ff; font-size:14px; border:1px dashed rgba(188,208,255,.25); background:transparent; cursor:pointer}
      .footer{margin-top:40px; border-top:1px solid rgba(255,255,255,.08); background:rgba(11,16,32,.75);}
      .footer-inner{max-width:1150px; margin:0 auto; padding:16px; display:flex; align-items:center; gap:12px; justify-content:space-between; color:#9aa6bd; font-size:14px}

      /* Hero */
      .hero-title{font-size:30px; font-weight:900; line-height:1.25; margin:0 0 6px}
      .hero-sub{color:#b6c2da; margin:0 0 8px; font-size:15px}
      .kpis{display:grid; gap:12px; grid-template-columns: repeat(3, 1fr);}
      @media (max-width:980px){ .kpis{grid-template-columns:1fr} }
      .stat-title{color:#9fb0d1; font-size:13px}
      .stat-value{font-weight:900; font-size:22px; color:#f1f5f9}

      /* Tap targets for mobile */
      button, .logo, .pill{touch-action: manipulation}

      /* Scrollbar (mobile-friendly) */
      ::-webkit-scrollbar{width:10px;height:10px}
      ::-webkit-scrollbar-thumb{background:#1a2448;border-radius:10px}
      ::-webkit-scrollbar-track{background:#0b1020}
    </style>
  </head>
  <body>
    <header class="nav">
      <div class="nav-inner">
        <div class="brand" aria-label="Ø¹Ù„Ø§Ù…Ø© Ù…Ø³Ø§Ø¨Ù‚Ø©">
          <span class="brand-badge"></span><span>Ù…Ø³Ø§Ø¨Ù‚Ø©</span>
        </div>
        <div class="logos" aria-label="Ø´Ø¹Ø§Ø±Ø§Øª Ø¯Ø§Ø¹Ù…Ø©">
          <!-- Vision 2030 compact placeholder (SVG text to avoid trademarks) -->
          <span class="logo" title="Vision 2030">
            <svg viewBox="0 0 160 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <text x="0" y="17" font-family="Segoe UI, Arial" font-size="15" fill="#cbd5e1">Vision 2030</text>
            </svg>
          </span>
          <!-- Talabiya compact placeholder -->
          <span class="logo" title="Ù…Ø¨Ø§Ø¯Ø±Ø© ØªÙ„Ø¨ÙŠØ©">
            <svg viewBox="0 0 120 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <text x="0" y="17" font-family="Segoe UI, Arial" font-size="15" fill="#cbd5e1">Talabiya</text>
            </svg>
          </span>
        </div>
        <div class="nav-buttons">
          <button class="tab tab-active" data-tab="landing">Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©</button>
          <button class="tab" data-tab="individual">ÙØ±Ø¯</button>
          <button class="tab" data-tab="entity">Ø¬Ù‡Ø©</button>
          <button class="tab" data-tab="sponsor">Ø±Ø§Ø¹Ù</button>
          <button class="tab" data-tab="admin">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
          <button class="tab" data-tab="investor">Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±</button>
          <button class="cta">Ø§Ø¨Ø¯Ø£</button>
        </div>
      </div>
    </header>

    <main id="view"></main>

    <footer class="footer">
      <div class="footer-inner">
        <div>Â© <span id="y"></span> Musabaqa â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</div>
        <div style="display:flex;gap:16px">
          <a href="#" class="muted">Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
          <a href="#" class="muted">Ø§Ù„Ø´Ø±ÙˆØ·</a>
          <a href="#" class="muted">Ø§Ù„Ø¯Ø¹Ù…</a>
        </div>
      </div>
    </footer>

    <script>
      document.getElementById('y').textContent = new Date().getFullYear();

      // Theme tokens (for future theming)
      const theme = {
        primary: "#6d93ff",
        secondary: "#22d3ee",
        text: "#e5e7eb",
        muted: "#94a3b8"
      };

      const view = document.getElementById('view');
      const state = {
        route: 'landing',
        competitions: [
          { id: 'c1', title:'Ø§Ù„ØªÙˆØ¹ÙŠØ© Ø¨Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ', type:'ØªÙˆØ¹ÙˆÙŠØ©', owner:'ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…', city:'Ø§Ù„Ø±ÙŠØ§Ø¶', prize:1000, prizeType:'Ø±Ù‚Ù…ÙŠØ©', status:'Ù…ÙØªÙˆØ­Ø©', winners:3, participants:[] },
          { id: 'c2', title:'ØªØ­Ø¯ÙŠ Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯', type:'ØªØ³ÙˆÙŠÙ‚ÙŠØ©', owner:'Ø´Ø±ÙƒØ© ØªÙ…ÙˆÙŠÙ† Ø§Ù„ØºØ°Ø§Ø¡', city:'Ø¬Ø¯Ø©', prize:5000, prizeType:'Ø¹ÙŠÙ†ÙŠØ©', status:'Ù…ÙØªÙˆØ­Ø©', winners:1, participants:[] },
          { id: 'c3', title:'Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ¦Ø© â€“ ÙÙƒØ±Ø© Ù…Ø¨ØªÙƒØ±Ø© Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ø±', type:'ØªÙˆØ¹ÙˆÙŠØ©', owner:'ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ¦Ø©', city:'Ø§Ù„Ø¯Ù…Ø§Ù…', prize:3000, prizeType:'Ù†Ù‚Ø¯ÙŠØ©', status:'Ù…ØºÙ„Ù‚Ø©', winners:2, participants:[{user:'Ø³Ø§Ø±Ø©', city:'Ø§Ù„Ø±ÙŠØ§Ø¶'},{user:'Ø®Ø§Ù„Ø¯', city:'Ø§Ù„Ø¯Ù…Ø§Ù…'}] }
        ],
        user: { name:'ÙÙ‡Ø¯', city:'Ø§Ù„Ø±ÙŠØ§Ø¶', interests:['Ø§Ù„Ø«Ù‚Ø§ÙØ©','Ø§Ù„ØªÙ‚Ù†ÙŠØ©','Ø§Ù„Ø±ÙŠØ§Ø¶Ø©'] },
        sponsor: { org:'Ø´Ø±ÙƒØ© ØªÙ…ÙˆÙŠÙ† Ø§Ù„ØºØ°Ø§Ø¡', wallet:25000 }
      };

      function SAR(n){ return new Intl.NumberFormat('ar-SA',{style:'currency',currency:'SAR'}).format(n); }
      function fmt(n){ return new Intl.NumberFormat('ar-SA').format(n); }

      function Stat(label, value, sub){
        return `<div class="card"><div class="stat-value">${value}</div><div class="stat-title">${label}</div>${sub?`<div class="muted" style="font-size:12px;margin-top:4px">${sub}</div>`:''}</div>`;
      }
      function Pill(txt){ return `<span class="pill">${txt}</span>`; }
      function AccountCard(key, title, desc){
        return `<div class="card" data-go="${key}" style="cursor:pointer"><div style="font-weight:700">${title}</div><div class="muted" style="margin-top:4px">${desc}</div></div>`;
      }

      function render(){
        const active = state.competitions.filter(c=> c.status!=='Ù…ØºÙ„Ù‚Ø©').length;
        const participations = state.competitions.reduce((a,c)=> a + c.participants.length, 0);
        const prizesClosed = state.competitions.filter(c=> c.status==='Ù…ØºÙ„Ù‚Ø©').reduce((a,c)=> a + c.winners, 0);
        const prizeValue = state.competitions.reduce((a,c)=> a + c.prize, 0);
        const sponsors = 7;
        const users = 58000;

        const R = {
          landing: `
            <section class="container">
              <div class="grid grid-2" style="align-items:center">
                <div>
                  <h1 class="hero-title">Ù…Ø³Ø§Ø¨Ù‚Ø© â€” Ù‡ÙˆÙŠØ© Ø¹ØµØ±ÙŠØ© ØªØ±Ø¨Ø· <span style="color:${theme.primary}">Ø§Ù„ØªØ­Ø¯ÙŠ</span> Ø¨Ù€ <span style="color:${theme.secondary}">Ø§Ù„ØªØ­ÙÙŠØ²</span></h1>
                  <p class="hero-sub">Ù…Ù†ØµØ© ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„ØªÙˆØ¹ÙˆÙŠØ© ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ© ØªÙ‚ÙŠØ³ Ø£Ø«Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ Ø±Ù‚Ù…ÙŠÙ‹Ø§ ÙˆØªØ³Ù„Ù‘Ù… Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø¨Ø£Ù†ÙˆØ§Ø¹Ù‡Ø§.</p>
                  <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px">
                    <button class="btn-accent" data-go="individual">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ (ÙØ±Ø¯)</button>
                    <button class="btn" data-go="entity">Ù„Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©/ØºÙŠØ± Ø§Ù„Ø±Ø¨Ø­ÙŠØ©</button>
                    <button class="btn" data-go="sponsor">Ù„Ù„Ø±Ø¹Ø§Ø© ÙˆØ§Ù„Ø´Ø±ÙƒØ§Øª</button>
                    <button class="btn-ghost" data-go="investor">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±</button>
                  </div>
                  <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
                    ${Pill('RTL')}${Pill('ØªÙ‚Ø§Ø±ÙŠØ± ØªÙØ§Ø¹Ù„ÙŠØ©')}${Pill('Ù…Ø­ÙØ¸Ø© Ø±Ù‚Ù…ÙŠØ©')}${Pill('Ø¬ÙˆØ§Ø¦Ø² Ù†Ù‚Ø¯ÙŠØ©/Ø±Ù‚Ù…ÙŠØ©/Ø¹ÙŠÙ†ÙŠØ©')}
                  </div>
                </div>
                <div class="card">
                  <div class="kpis">
                    ${Stat('Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©', fmt(active))}
                    ${Stat('Ù…Ø´Ø§Ø±ÙƒØ§Øª', fmt(participations))}
                    ${Stat('Ø¬ÙˆØ§Ø¦Ø² Ù…ÙØ³Ù„Ù‘ÙÙ…Ø©', fmt(prizesClosed))}
                    ${Stat('Ø±Ø¹Ø§Ø© Ù†Ø´Ø·ÙˆÙ†', fmt(sponsors))}
                    ${Stat('Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²', SAR(prizeValue))}
                    ${Stat('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†', fmt(users))}
                  </div>
                </div>
              </div>

              <h3 style="font-size:18px;font-weight:700;margin:14px 0 8px">Ù…Ù† ÙŠØ®Ø¯Ù…Ù‡Ù… Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ</h3>
              <div class="grid grid-4">
                ${AccountCard('individual','Ø§Ù„Ø£ÙØ±Ø§Ø¯','Ù…Ø´Ø§Ø±ÙƒØ©/Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø¬ÙˆØ§Ø¦Ø²')}
                ${AccountCard('entity','Ø¬Ù‡Ø§Øª Ø­ÙƒÙˆÙ…ÙŠØ©/ØºÙŠØ± Ø±Ø¨Ø­ÙŠØ©','Ø¥Ø·Ù„Ø§Ù‚ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª ØªÙˆØ¹ÙˆÙŠØ© ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø«Ø±')}
                ${AccountCard('sponsor','Ø§Ù„Ø´Ø±ÙƒØ§Øª/Ø§Ù„Ø±Ø¹Ø§Ø©','Ø±Ø¹Ø§ÙŠØ©/Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª ÙˆØªØ­Ù„ÙŠÙ„ ROI')}
                ${AccountCard('investor','Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±','Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ù†Ù…Ùˆ Ø§Ù„Ù…Ø§Ù„ÙŠ')}
              </div>

              <h3 style="font-size:18px;font-weight:700;margin:14px 0 8px">Ø´Ø±ÙƒØ§Ø¡ ÙˆØªØ¬Ø§Ø±Ø¨</h3>
              <div class="card">
                <div class="grid grid-4" style="text-align:center;color:#cbd5e1">
                  <div class="card">ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ¦Ø© (ØªØ¬Ø±ÙŠØ¨ÙŠ)</div>
                  <div class="card">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… (ØªØ¬Ø±ÙŠØ¨ÙŠ)</div>
                  <div class="card">Ø´Ø±ÙƒØ© ØªÙ…ÙˆÙŠÙ† Ø§Ù„ØºØ°Ø§Ø¡</div>
                  <div class="card">Ø¬Ø§Ù…Ø¹Ø© Ø­Ø§Ø¦Ù„</div>
                </div>
              </div>
            </section>
          `,
          individual: `
            <section class="container">
              <h2 style="font-size:22px;font-weight:800;margin-bottom:10px">Ù…Ø±Ø­Ø¨Ù‹Ø§ ${state.user.name} ğŸ‘‹</h2>
              <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px">
                ${Pill('Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: '+state.user.city)}
                ${Pill('Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª: '+state.user.interests.join('ØŒ '))}
                <select id="cityFilter" class="input" aria-label="ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©">
                  <option value="">ÙƒÙ„ Ø§Ù„Ù…Ø¯Ù†</option><option>Ø§Ù„Ø±ÙŠØ§Ø¶</option><option>Ø¬Ø¯Ø©</option><option>Ø§Ù„Ø¯Ù…Ø§Ù…</option>
                </select>
              </div>
              <div class="grid grid-2">
                ${state.competitions.filter(c=> c.status!=='Ù…ØºÙ„Ù‚Ø©').map(c => `
                  <article class="card">
                    <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
                      <h4 style="margin:0;font-weight:800">${c.title}</h4>
                      ${Pill(c.type)}
                    </div>
                    <div class="muted" style="margin-top:4px">${c.owner} â€¢ ${c.city}</div>
                    <div style="font-size:14px;margin-top:8px">Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©: ${SAR(c.prize)} (${c.prizeType}) â€¢ Ø¹Ø¯Ø¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†: ${c.winners}</div>
                    <textarea class="textarea" data-answer="${c.id}" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø¨Ø¥ÙŠØ¬Ø§Ø²"></textarea>
                    <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
                      <button class="btn-accent" data-participate="${c.id}">Ø£Ø´Ø§Ø±Ùƒ Ø§Ù„Ø¢Ù†</button>
                      <button class="btn-ghost">Ù…Ø´Ø§Ø±ÙƒØ©</button>
                    </div>
                  </article>
                `).join('')}
              </div>
            </section>
          `,
          entity: `
            <section class="container">
              <h2 style="font-size:22px;font-weight:800;margin-bottom:10px">Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ù‡Ø©: ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… â€“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h2>
              <div class="card">
                <h3 style="font-size:18px;font-weight:700;margin-bottom:8px">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø¨Ù‚Ø© ØªÙˆØ¹ÙˆÙŠØ©</h3>
                <div class="grid grid-2">
                  <input id="e-title" class="input" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©" />
                  <select id="e-type" class="input"><option>ØªÙˆØ¹ÙˆÙŠØ©</option><option>Ø«Ù‚Ø§ÙÙŠØ©</option><option>ØªØ³ÙˆÙŠÙ‚ÙŠØ©</option></select>
                  <select id="e-city" class="input"><option>Ø§Ù„Ø±ÙŠØ§Ø¶</option><option>Ø¬Ø¯Ø©</option><option>Ø§Ù„Ø¯Ù…Ø§Ù…</option></select>
                  <input id="e-winners" class="input" type="number" min="1" value="1" />
                  <input id="e-prize" class="input" type="number" min="0" value="1000" />
                  <select id="e-ptype" class="input"><option>Ø±Ù‚Ù…ÙŠØ©</option><option>Ù†Ù‚Ø¯ÙŠØ©</option><option>Ø¹ÙŠÙ†ÙŠØ©</option></select>
                </div>
                <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
                  <button class="btn-accent" id="e-create">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
                  <button class="btn">Ø­ÙØ¸ Ù…Ø³ÙˆØ¯Ø©</button>
                </div>
              </div>
            </section>
          `,
          sponsor: `
            <section class="container">
              <h2 style="font-size:22px;font-weight:800;margin-bottom:10px">Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø§Ø¹ÙŠ: ${state.sponsor.org}</h2>
              <div class="grid grid-3">
                ${Stat('Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©', SAR(state.sponsor.wallet), 'ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ù„Ø§Ø­Ù‚Ù‹Ø§')}
                ${Stat('Ø­Ù…Ù„Ø§Øª Ù…ÙØªÙˆØ­Ø© Ù„Ù„Ø±Ø¹Ø§ÙŠØ©', fmt(state.competitions.filter(c=> c.status==='Ù…ÙØªÙˆØ­Ø©').length))}
                ${Stat('Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²', SAR(avgPrize()))}
              </div>
              <div class="grid grid-2" style="margin-top:12px">
                <div class="card">
                  <h3 style="font-size:18px;font-weight:700;margin-bottom:8px">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø¨Ù‚Ø© ØªØ³ÙˆÙŠÙ‚ÙŠØ©</h3>
                  <div class="grid grid-2">
                    <input id="s-title" class="input" style="grid-column:1 / -1" value="Ø­Ù…Ù„Ø© ØªØ±ÙˆÙŠØ¬ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©" />
                    <select id="s-type" class="input"><option>ØªØ³ÙˆÙŠÙ‚ÙŠØ©</option><option>Ø«Ù‚Ø§ÙÙŠØ©</option></select>
                    <select id="s-city" class="input"><option>Ø§Ù„Ø±ÙŠØ§Ø¶</option><option>Ø¬Ø¯Ø©</option><option>Ø§Ù„Ø¯Ù…Ø§Ù…</option></select>
                    <input id="s-winners" class="input" type="number" value="1" />
                    <input id="s-prize" class="input" type="number" value="2000" />
                    <select id="s-ptype" class="input"><option>Ø±Ù‚Ù…ÙŠØ©</option><option>Ù†Ù‚Ø¯ÙŠØ©</option><option>Ø¹ÙŠÙ†ÙŠØ©</option></select>
                  </div>
                  <div style="margin-top:8px"><button class="btn-accent" id="s-create">Ø¥Ù†Ø´Ø§Ø¡</button></div>
                </div>
                <div class="card">
                  <h3 style="font-size:18px;font-weight:700;margin-bottom:8px">Ø±Ø¹Ø§ÙŠØ© Ù…Ø³Ø§Ø¨Ù‚Ø© Ù‚Ø§Ø¦Ù…Ø©</h3>
                  <div id="s-open"></div>
                </div>
              </div>
            </section>
          `,
          admin: `
            <section class="container">
              <h2 style="font-size:22px;font-weight:800;margin-bottom:10px">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
              <div class="grid grid-2">
                ${state.competitions.map(c => `
                  <div class="card">
                    <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
                      <div style="font-weight:800">${c.title}</div>
                      ${Pill(c.status)}
                    </div>
                    <div class="muted" style="margin-top:4px">${c.owner} â€¢ ${c.type} â€¢ ${c.city}</div>
                    <div style="font-size:14px;margin-top:8px">Ù…Ø´Ø§Ø±ÙƒÙˆÙ†: ${c.participants.length} â€¢ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©: ${SAR(c.prize)} â€¢ ÙØ§Ø¦Ø²ÙˆÙ†: ${c.winners}</div>
                    <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
                      ${c.status==='Ù…Ø³ÙˆØ¯Ø©' ? `<button class="btn" data-approve="${c.id}">Ø§Ø¹ØªÙ…Ø§Ø¯</button>` : ''}
                      ${c.status!=='Ù…ØºÙ„Ù‚Ø©' ? `<button class="btn" data-close="${c.id}">Ø¥ØºÙ„Ø§Ù‚</button>` : ''}
                      <button class="btn-accent" data-pick="${c.id}">ÙØ±Ø² Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†</button>
                    </div>
                  </div>
                `).join('')}
              </div>
            </section>
          `,
          investor: `
            <section class="container">
              <h2 style="font-size:22px;font-weight:800;margin-bottom:10px">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±</h2>
              <div class="grid grid-3">
                ${Stat('Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†', fmt(users), 'Ù†Ù…Ùˆ Ø´Ù‡Ø±ÙŠ 12%')}
                ${Stat('Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø´Ù‡Ø±ÙŠØ©', SAR(185000), 'ØªØ±Ø§ÙƒÙ…ÙŠ ØªØ¬Ø±ÙŠØ¨ÙŠ')}
                ${Stat('Ø±Ø¹Ø§Ø© Ù†Ø´Ø·ÙˆÙ†', fmt(sponsors))}
              </div>
              <div class="card" style="margin-top:12px">
                <h3 style="font-size:18px;font-weight:700;margin-bottom:8px">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</h3>
                <div class="grid grid-2">
                  ${Stat('Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ù†Ø´Ø·Ø©', fmt(active))}
                  ${Stat('Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©', SAR(prizeValue))}
                </div>
                <div class="muted" style="margin-top:8px">* Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø· â€” ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ù…ØµØ¯Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø§Ø­Ù‚Ù‹Ø§.</div>
              </div>
            </section>
          `
        };

        view.innerHTML = R[state.route];

        // Wire interactions
        document.querySelectorAll('[data-go]').forEach(b => b.addEventListener('click', e => routeTo(e.target.getAttribute('data-go'))));
        if(state.route === 'individual'){
          document.querySelectorAll('[data-participate]').forEach(btn => btn.addEventListener('click', e => {
            const cid = e.target.getAttribute('data-participate');
            const ta = document.querySelector(`[data-answer="${cid}"]`);
            const answer = (ta && ta.value || '').trim();
            if(!answer){ alert('ÙØ¶Ù„Ø§Ù‹ Ø§ÙƒØªØ¨ Ù…Ø´Ø§Ø±ÙƒØªÙƒ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„'); return; }
            const c = state.competitions.find(x=> x.id===cid);
            c.participants.push({ user: state.user.name, city: state.user.city, answer });
            if(ta) ta.value = '';
            alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø´Ø§Ø±ÙƒØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ âœ…');
          }));
        }
        if(state.route === 'entity'){
          const create = document.getElementById('e-create');
          if(create) create.addEventListener('click', () => {
            const entry = {
              id: 'c'+Date.now(),
              title: val('e-title') || 'Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†',
              type: val('e-type'),
              owner: 'ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
              city: val('e-city'),
              prize: Number(val('e-prize'))||0,
              prizeType: val('e-ptype'),
              status: 'Ù…ÙØªÙˆØ­Ø©',
              winners: Number(val('e-winners'))||1,
              participants: []
            };
            state.competitions.unshift(entry);
            alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ÙˆÙ†Ø´Ø±Ù‡Ø§ âœ…');
            routeTo('admin');
          });
        }
        if(state.route === 'sponsor'){
          const create = document.getElementById('s-create');
          if(create) create.addEventListener('click', () => {
            const entry = {
              id: 'c'+Date.now(),
              title: val('s-title'),
              type: val('s-type'),
              owner: state.sponsor.org,
              city: val('s-city'),
              prize: Number(val('s-prize'))||0,
              prizeType: val('s-ptype'),
              status: 'Ù…ÙØªÙˆØ­Ø©',
              winners: Number(val('s-winners'))||1,
              participants: []
            };
            state.competitions.unshift(entry);
            alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ© âœ…');
            routeTo('admin');
          });
          // render open comps for quick fund
          const open = state.competitions.filter(c=> c.status==='Ù…ÙØªÙˆØ­Ø©');
          const holder = document.getElementById('s-open');
          if(holder){
            holder.innerHTML = open.map(c => `
              <div style="display:flex;align-items:center;justify-content:space-between;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px;margin-bottom:8px;background:#0b1224">
                <div><div style="font-weight:800">${c.title}</div><div class="muted">${c.owner} â€¢ ${c.city}</div></div>
                <div style="display:flex;gap:8px;align-items:center">
                  <input class="input" style="width:110px" type="number" min="100" value="1000" data-amt="${c.id}" />
                  <button class="btn-accent" data-fund="${c.id}">ØªÙ…ÙˆÙŠÙ„</button>
                </div>
              </div>`).join('');
            holder.querySelectorAll('[data-fund]').forEach(btn => btn.addEventListener('click', e => {
              const cid = e.target.getAttribute('data-fund');
              const inp = holder.querySelector(`[data-amt="${cid}"]`);
              const amt = Number(inp && inp.value || 0);
              if(amt<=0) return;
              const c = state.competitions.find(x=> x.id===cid);
              c.prize += amt;
              state.sponsor.wallet = Math.max(0, state.sponsor.wallet - amt);
              alert('ØªÙ… Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© âœ…');
              routeTo('sponsor');
            }));
          }
        }
        if(state.route === 'admin'){
          document.querySelectorAll('[data-close]').forEach(btn => btn.addEventListener('click', e => {
            const cid = e.target.getAttribute('data-close');
            const c = state.competitions.find(x=> x.id===cid);
            c.status = 'Ù…ØºÙ„Ù‚Ø©';
            render();
          }));
          document.querySelectorAll('[data-pick]').forEach(btn => btn.addEventListener('click', e => {
            const cid = e.target.getAttribute('data-pick');
            const c = state.competitions.find(x=> x.id===cid);
            const shuffled = c.participants.slice().sort(()=> Math.random()-0.5);
            const winners = shuffled.slice(0, c.winners);
            alert(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ${winners.length} ÙØ§Ø¦Ø²/Ø©:\n` + winners.map(w=>`â€¢ ${w.user} (${w.city})`).join('\n'));
          }));
        }
      }

      function val(id){ const el = document.getElementById(id); return el?el.value:''; }
      function routeTo(tab){
        state.route = tab;
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('tab-active'));
        const btn = document.querySelector(`.tab[data-tab="${tab}"]`);
        if(btn) btn.classList.add('tab-active');
        render();
        window.scrollTo({top:0, behavior:'smooth'});
      }
      function avgPrize(){
        const open = state.competitions.filter(c=> c.status==='Ù…ÙØªÙˆØ­Ø©');
        if(open.length===0) return 0;
        return Math.round(open.reduce((a,c)=> a + c.prize, 0) / open.length);
      }

      // Init
      document.querySelectorAll('.tab').forEach(btn => btn.addEventListener('click', e => routeTo(btn.getAttribute('data-tab'))));
      render();
    </script>
  </body>
</html>
