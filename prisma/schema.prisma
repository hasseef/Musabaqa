datasource db { provider = "sqlite"; url = env("DATABASE_URL") }
generator client { provider = "prisma-client-js" }

model User {
  id        String  @id @default(cuid())
  name      String
  email     String  @unique
  city      String?
  age       Int?
  interests String[]
  points    Int     @default(0)
  role      Role    @default(USER)
  createdAt DateTime @default(now())
  participants Participant[]
}

model Competition {
  id        String @id @default(cuid())
  title     String
  type      String
  ownerId   String?
  ownerName String?
  city      String
  prize     Int
  prizeType String
  status    String   @default("OPEN")
  winners   Int      @default(1)
  videoUrl  String?
  requiresCode Boolean @default(false)
  accessCode String?
  targetCities String[]
  targetMinAge Int?
  targetMaxAge Int?
  targetInterests String[]
  participants Participant[]
  createdAt DateTime @default(now())
}

model Participant {
  id            String @id @default(cuid())
  competitionId String
  userId        String?
  name          String
  city          String?
  answer        String
  createdAt     DateTime @default(now())
  Competition   Competition @relation(fields: [competitionId], references: [id])
  User          User?       @relation(fields: [userId], references: [id])
}

model Opportunity {
  id          String @id @default(cuid())
  orgName     String
  title       String
  description String
  prizeBudget Int
  status      String @default("OPEN")
  createdAt   DateTime @default(now())
}

enum Role {
  USER
  ENTITY
  SPONSOR
  ADMIN
  INVESTOR
}
